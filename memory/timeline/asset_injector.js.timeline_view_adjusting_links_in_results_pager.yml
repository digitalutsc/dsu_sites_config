langcode: en
status: true
dependencies:
  module:
    - context
    - user
id: timeline_view_adjusting_links_in_results_pager
label: 'Timeline View: Adjusting links in Results pager'
code: |+
  // change grid to list
  jQuery('#block-barriodepartments-content > .content > .views-element-container > 
.view-timelinejs-solr-based-view').removeClass("view-grid");

  // replace with view-list
  jQuery('#block-barriodepartments-content > .content > .views-element-container > .view-timelinejs-solr-based-view').addClass("view-list");

  jQuery(".view-timelinejs-solr-based-view > .view-header").hide();

  // below doesn't seem to work if logging in
  // hide sort dropdown
  jQuery("#pager-sort-select").hide(); 

  // process timeline url
  var url = jQuery("#link-display-list").attr('href');
  if (url !== undefined) {
  	if (url.includes('?')){
  		var parts = url.split('?');
  		parts[0].replace("/timeline", "");  
  		var final_url = parts[0].replace("/timeline", "") + "?" + parts[1];
  		jQuery("#link-display-list").attr('href', final_url + "&display=list");
  	}
  	else {
  		url.replace("/timeline", "");
  	}
  }

  url = jQuery("#link-display-grid").attr('href');
  if (url !== undefined) {
  	if (url.includes('?')){
  		var parts = url.split('?');
  		parts[0].replace("/timeline", "");  
  		var final_url = parts[0].replace("/timeline", "") + "?" + parts[1];
  		jQuery("#link-display-grid").attr('href', final_url + "&display=grid");
  	}
  	else {
  		url.replace("/timeline", "");
  	}
  }









noscript: ''
noscriptRegion: {  }
jquery: true
header: false
preprocess: true
conditions:
  view_inclusion:
    id: view_inclusion
    negate: false
    view_inclusion:
      view-timelinejs_solr_based_view-page_1: view-timelinejs_solr_based_view-page_1
  context:
    id: context
    negate: null
    values: ''
  context_all:
    id: context_all
    negate: null
    values: ''
  user_role:
    id: user_role
    negate: false
    context_mapping:
      user: '@user.current_user_context:current_user'
    roles:
      anonymous: anonymous
      authenticated: authenticated
      content_editor: content_editor
      administrator: administrator
contexts: {  }
conditions_require_all: true

